@model WebApplication4.Models.Treatment

@{
    ViewBag.Title = "Create";
}

<h2>新建</h2>


@using (Html.BeginForm())
{
    @Html.AntiForgeryToken()

    <div class="form-horizontal">

        <hr />
        @Html.ValidationSummary(true, "", new { @class = "text-danger" })
        @Html.HiddenFor(model => model.Id)
        @Html.HiddenFor(model => model.refId)
        @Html.HiddenFor(model => model.scannum)
        @Html.HiddenFor(model => model.name)
        @Html.HiddenFor(model => model.visit)


        @{
            if (Model.name == 0)
            {

                @*<div class="form-group" style="font-size:18px;padding:3px">
                        <label class="control-label col-md-2" style="padding-top:1px">感染及根除情况:</label>
                        <div class="col-md-10">
                            <textarea cols="20" htmlattributes="{ class = white-space:pre-wrap }" style="height:100px;width:400px" id="condition" name="condition" rows="2">@Model.condition</textarea>

                            @Html.ValidationMessageFor(model => model.condition, "", new { @class = "text-danger" })
                        </div>
                    </div>

                    <div class="form-group" style="font-size:18px;padding:3px">
                        <label class="control-label col-md-2" style="padding-top:3px">时间:</label>
                        <div class="col-md-10">
                            @Html.TextBoxFor(Model => Model.time, "{0:yyyy-MM-dd}", new { @type = "date", @class = "form-control" })
                            @Html.ValidationMessageFor(model => model.time, "", new { @class = "text-danger" })
                        </div>
                    </div>

                    <div class="form-group" style="font-size:18px;padding:3px">
                        <label class="control-label col-md-2" style="padding-top:1px">是否感染:</label>
                        <div class="col-md-10">

                            <label>@Html.RadioButtonFor(model => model.isInfected, 0, new { htmlAttributes = new { @class = "form-control" } })无</label>
                            <label>@Html.RadioButtonFor(model => model.isInfected, 1, new { htmlAttributes = new { @class = "form-control" } })有</label>


                            @Html.ValidationMessageFor(model => model.isInfected, "", new { @class = "text-danger" })
                        </div>
                    </div>*@

                <h3>方案</h3>
                <div class="form-group" style="font-size:18px;padding:3px">
                    <label class="control-label col-md-2" style="padding-top:1px">质子泵抑制剂:</label>
                    <div class="col-md-10">

                        <input type="checkbox" name="Omeprazole" value="1" /><text>奥美拉唑&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</text>

                        <input type="checkbox" name="Rabeprazole" value="1" /><text>雷贝拉唑&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</text>

                        <input type="checkbox" name="Esomeprazole" value="1" /><text>埃索美拉唑&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</text>


                        <input type="checkbox" name="Pantoprazole" value="1" /><text>泮托拉唑&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</text>

                        <input type="checkbox" name="OtherPPI" value="1" /><text>其他质子泵抑制剂&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</text>

                    </div>
                </div>

                <div class="form-group" style="font-size:18px;padding:3px">
                    <label class="control-label col-md-2" style="padding-top:1px">铋剂:</label>
                    <div class="col-md-10">

                        <label>@Html.RadioButtonFor(model => model.isInfected, 0, new { htmlAttributes = new { @class = "form-control" } }) 无</label>
                        <label>@Html.RadioButtonFor(model => model.isInfected, 1, new { htmlAttributes = new { @class = "form-control" } }) 有</label>


                        @Html.ValidationMessageFor(model => model.isInfected, "", new { @class = "text-danger" })
                    </div>
                </div>

                <div class="form-group" style="font-size:18px;padding:3px">
                    <label class="control-label col-md-2" style="padding-top:1px">抗生素:</label>
                    <div class="col-md-10">

                        <input type="checkbox" name="Amoxicillin" value="1" /><text>阿莫西林&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</text>

                        <input type="checkbox" name="tetracycline" value="1" /><text>四环素&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</text>

                        <input type="checkbox" name="Levofloxacin" value="1" /><text>左氧氟沙星&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</text>

                        <input type="checkbox" name="Clarithromycin" value="1" /><text>克拉霉素&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</text>

                        <input type="checkbox" name="Furazolidone" value="1" /><text>呋喃唑酮&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</text>

                        <input type="checkbox" name="Metronidazole" value="1" /><text>甲硝唑&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</text>

                        <input type="text" /><text>其他</text>
                    </div>
                </div>

                <div class="form-group" style="font-size:18px;padding:3px">
                    <label class="control-label col-md-2" style="padding-top:1px">疗程:</label>
                    <div class="col-md-10">

                        <label>@Html.RadioButtonFor(model => model.treatTime, 7, new { htmlAttributes = new { @class = "form-control" } }) 7个疗程</label>
                        <label>@Html.RadioButtonFor(model => model.treatTime, 10, new { htmlAttributes = new { @class = "form-control" } }) 10个疗程</label>
                        <label>@Html.RadioButtonFor(model => model.treatTime, 14, new { htmlAttributes = new { @class = "form-control" } }) 14个疗程</label>

                        @Html.ValidationMessageFor(model => model.treatTime, "", new { @class = "text-danger" })
                    </div>
                </div>
                <hr />
                <div class="form-group" style="font-size:18px;padding:3px">
                    <label class="control-label col-md-2" style="padding-top:1px">是否按时服药:</label>
                    <div class="col-md-10">


                        <label>@Html.RadioButtonFor(model => model.isOnTime, 0, new { htmlAttributes = new { @class = "form-control" } }) 无</label>
                        <label>@Html.RadioButtonFor(model => model.isOnTime, 1, new { htmlAttributes = new { @class = "form-control" } }) 有</label>

                       

                        @Html.ValidationMessageFor(model => model.isOnTime, "", new { @class = "text-danger" })
                    </div>
                </div>

                Model.isEradicated = 1;
                <div class="form-group" style="font-size:18px;padding:3px">
                    <label class="control-label col-md-2" style="padding-top:1px">是否根除:</label>
                    <div class="col-md-10">

                        <label>@Html.RadioButtonFor(model => model.isEradicated, 0, new { htmlAttributes = new { @class = "form-control" } }) 否</label>
                        <label>@Html.RadioButtonFor(model => model.isEradicated, 1, new { htmlAttributes = new { @class = "form-control" } }) 是</label>

                        <button class="btn btn-info" id="myModal" style="display:none" href="/Treatments/Create?id=@Model.refId&&scannum=@Model.scannum&&visit=@Model.visit&&refid=@Model.refId&&name=@Model.name">再来一次检查</button>
                        @Html.ValidationMessageFor(model => model.isEradicated, "", new { @class = "text-danger" })
                    </div>
                </div>

            }
            else
            {
                @Html.HiddenFor(model => model.condition)
                @Html.HiddenFor(model => model.isInfected)
                @Html.HiddenFor(model => model.isEradicated)
                @Html.HiddenFor(model => model.Omeprazole)
                @Html.HiddenFor(model => model.Rabeprazole)
                @Html.HiddenFor(model => model.Esomeprazole)
                @Html.HiddenFor(model => model.Pantoprazole)
                @Html.HiddenFor(model => model.OtherPPI)
                @Html.HiddenFor(model => model.Amoxicillin)
                @Html.HiddenFor(model => model.tetracycline)
                @Html.HiddenFor(model => model.Levofloxacin)
                @Html.HiddenFor(model => model.Clarithromycin)
                @Html.HiddenFor(model => model.Furazolidone)
                @Html.HiddenFor(model => model.Metronidazole)

                <h3>治疗基本情况</h3>
                <div class="form-group" style="font-size:18px;padding:3px">
                    <label class="control-label col-md-2" style="padding-top:1px">具体:</label>
                    <div class="col-md-10">
                        <textarea cols="20" htmlattributes="{ class = white-space:pre-wrap }" style="height:100px;width:400px" id="content" name="content" rows="2">@Model.content</textarea>

                        @Html.ValidationMessageFor(model => model.content, "", new { @class = "text-danger" })
                    </div>
                </div>
                <div class="form-group" style="font-size:18px;padding:3px">
                    <label class="control-label col-md-2" style="padding-top:3px">时间:</label>
                    <div class="col-md-10">
                        @Html.TextBoxFor(Model => Model.time, "{0:yyyy-MM-dd}", new { @type = "date", @class = "form-control" })
                        @Html.ValidationMessageFor(model => model.time, "", new { @class = "text-danger" })
                    </div>
                </div>

                <hr />
                <h3>疗程及服药情况</h3>
                <div class="form-group" style="font-size:18px;padding:3px">
                    <label class="control-label col-md-2" style="padding-top:1px">疗程:</label>
                    <div class="col-md-10">

                        <label>@Html.RadioButtonFor(model => model.treatTime, 7, new { htmlAttributes = new { @class = "form-control" } }) 7个疗程</label>
                        <label>@Html.RadioButtonFor(model => model.treatTime, 10, new { htmlAttributes = new { @class = "form-control" } }) 10个疗程</label>
                        <label>@Html.RadioButtonFor(model => model.treatTime, 14, new { htmlAttributes = new { @class = "form-control" } }) 14个疗程</label>

                        @Html.ValidationMessageFor(model => model.treatTime, "", new { @class = "text-danger" })
                    </div>
                </div>

                <div class="form-group" style="font-size:18px;padding:3px">
                    <label class="control-label col-md-2" style="padding-top:1px">是否按时服药:</label>
                    <div class="col-md-10">


                        <label>@Html.RadioButtonFor(model => model.isOnTime, 0, new { htmlAttributes = new { @class = "form-control" } })无</label>
                        <label>@Html.RadioButtonFor(model => model.isOnTime, 1, new { htmlAttributes = new { @class = "form-control" } })有</label>



                        @Html.ValidationMessageFor(model => model.isOnTime, "", new { @class = "text-danger" })
                    </div>
                </div>
            }
        }




        <div class="form-group">
            <div class="col-md-offset-2 col-md-10" style="font-size:18px;padding:3px">
                <input type="submit" value="保存" class="btn btn-default"  id="sub"/>|
                <a href="javascript:window.history.go(-1)">返回</a>
            </div>
        </div>
    </div>
}


@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
}
<script src="~/Scripts/jquery-3.3.1.min.js"></script>
<script src="~/Scripts/bootstrap.min.js"></script>
<script type="text/javascript">
  
    $('#isEradicated').on('change', function () {//当chooseImage的值改变时，执行此函数
        var a = $("input:radio[name$=isEradicated]:checked").val();
        console.log(a);
        if (a == 0) {
            $("#myModal").show();
        } 
       
       
    });
    $("input:radio[name$=isEradicated]:checked").on('change', function () {//当chooseImage的值改变时，执行此函数
        var b = $("input:radio[name$=isEradicated]:checked").val();
        console.log(b);
        if (b == 1) {
            $("#myModal").hide();
        }
        

    });

    $('#myModal').on('click', function () {
        //$('#sub').click();
    });

</script>